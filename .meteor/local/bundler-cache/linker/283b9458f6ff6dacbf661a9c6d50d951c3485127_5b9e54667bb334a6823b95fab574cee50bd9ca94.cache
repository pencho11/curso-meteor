[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar meteorInstall = Package.modules.meteorInstall;\nvar meteorBabelHelpers = Package.modules.meteorBabelHelpers;\nvar Promise = Package.promise.Promise;\nvar Symbol = Package['ecmascript-runtime-client'].Symbol;\nvar Map = Package['ecmascript-runtime-client'].Map;\nvar Set = Package['ecmascript-runtime-client'].Set;\n\nvar require = meteorInstall({\"node_modules\":{\"meteor\":{\"socialize:server-time\":{\"client\":{\"entry-meteor.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                              //\n// packages/socialize_server-time/client/entry-meteor.js                                        //\n//                                                                                              //\n//////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                //\nmodule.export({\n  ServerTime: function () {\n    return ServerTime;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar construct;\nmodule.link(\"./server-time.js\", {\n  \"default\": function (v) {\n    construct = v;\n  }\n}, 1);\nvar ServerTime = construct({\n  Meteor: Meteor\n}); // At startup, wait a couple seconds so that we can get a more accurate latency estimation.\n// This is far from optimal but should work.\n\nMeteor.startup(function () {\n  return Meteor.setTimeout(function () {\n    return ServerTime.init();\n  }, 2000);\n});\n//////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"server-time.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                              //\n// packages/socialize_server-time/client/server-time.js                                         //\n//                                                                                              //\n//////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                //\nvar ServerTime;\nmodule.link(\"../common/server-time\", {\n  ServerTime: function (v) {\n    ServerTime = v;\n  }\n}, 0);\nmodule.exportDefault(function (_ref) {\n  var Meteor = _ref.Meteor;\n\n  ServerTime.init = function () {\n    ServerTime._diffStart = Date.now();\n    Meteor.call('socialize:getServerTime', function (error, serverTimeStamp) {\n      if (!error) {\n        var now = Date.now();\n        var latency = now - ServerTime._diffStart;\n        ServerTime._timeDifference = serverTimeStamp + latency - now;\n      } else {\n        throw error;\n      }\n    });\n  };\n\n  if (!Meteor.isReactNative) {} else {\n    setTimeout(function () {\n      return ServerTime.init();\n    }, 2000);\n  }\n\n  return ServerTime;\n});\n//////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"common\":{\"server-time.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                              //\n// packages/socialize_server-time/common/server-time.js                                         //\n//                                                                                              //\n//////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                //\nmodule.export({\n  ServerTime: function () {\n    return ServerTime;\n  }\n});\nvar ServerTime = {\n  _timeDifference: 0\n};\n\nServerTime.now = function () {\n  function now() {\n    return Date.now() + this._timeDifference;\n  }\n\n  return now;\n}();\n\nServerTime.date = function () {\n  function date() {\n    return new Date(this.now());\n  }\n\n  return date;\n}();\n//////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\"\n  ]\n});\n\nvar exports = require(\"/node_modules/meteor/socialize:server-time/client/entry-meteor.js\");\n\n/* Exports */\nPackage._define(\"socialize:server-time\", exports);\n\n})();\n","servePath":"/packages/socialize_server-time.js","sourceMap":{"version":3,"sources":["packages/socialize:server-time/client/entry-meteor.js","packages/socialize:server-time/client/server-time.js","packages/socialize:server-time/common/server-time.js"],"names":["module","export","ServerTime","Meteor","link","v","construct","startup","setTimeout","init","exportDefault","_diffStart","Date","now","call","error","serverTimeStamp","latency","_timeDifference","isReactNative","date"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,YAAU,EAAC,YAAU;AAAC,WAAOA,UAAP;AAAkB;AAAzC,CAAd;AAA0D,IAAIC,MAAJ;AAAWH,MAAM,CAACI,IAAP,CAAY,eAAZ,EAA4B;AAACD,QAAM,EAAC,UAASE,CAAT,EAAW;AAACF,UAAM,GAACE,CAAP;AAAS;AAA7B,CAA5B,EAA2D,CAA3D;AAA8D,IAAIC,SAAJ;AAAcN,MAAM,CAACI,IAAP,CAAY,kBAAZ,EAA+B;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACC,aAAS,GAACD,CAAV;AAAY;AAAjC,CAA/B,EAAkE,CAAlE;AAMjJ,IAAMH,UAAU,GAAGI,SAAS,CAAC;AAAEH,QAAM,EAANA;AAAF,CAAD,CAA5B,C,CAEA;AACA;;AACAA,MAAM,CAACI,OAAP,CAAe;AAAA,SAAMJ,MAAM,CAACK,UAAP,CAAkB;AAAA,WAAMN,UAAU,CAACO,IAAX,EAAN;AAAA,GAAlB,EAA2C,IAA3C,CAAN;AAAA,CAAf,E;;;;;;;;;;;ACVA,IAAIP,UAAJ;AAAeF,MAAM,CAACI,IAAP,CAAY,uBAAZ,EAAoC;AAACF,YAAU,EAAC,UAASG,CAAT,EAAW;AAACH,cAAU,GAACG,CAAX;AAAa;AAArC,CAApC,EAA2E,CAA3E;AAAfL,MAAM,CAACU,aAAP,CAEe,gBAAgB;AAAA,MAAbP,MAAa,QAAbA,MAAa;;AAC3BD,YAAU,CAACO,IAAX,GAAkB,YAAM;AACpBP,cAAU,CAACS,UAAX,GAAwBC,IAAI,CAACC,GAAL,EAAxB;AAEAV,UAAM,CAACW,IAAP,CAAY,yBAAZ,EAAuC,UAACC,KAAD,EAAQC,eAAR,EAA4B;AAC/D,UAAI,CAACD,KAAL,EAAY;AACR,YAAMF,GAAG,GAAGD,IAAI,CAACC,GAAL,EAAZ;AACA,YAAMI,OAAO,GAAGJ,GAAG,GAAGX,UAAU,CAACS,UAAjC;AAEAT,kBAAU,CAACgB,eAAX,GAA8BF,eAAe,GAAGC,OAAnB,GAA8BJ,GAA3D;AACH,OALD,MAKO;AACH,cAAOE,KAAP;AACH;AACJ,KATD;AAUH,GAbD;;AAeA,MAAI,CAACZ,MAAM,CAACgB,aAAZ,EAA2B,CAE1B,CAFD,MAEO;AACHX,cAAU,CAAC;AAAA,aAAMN,UAAU,CAACO,IAAX,EAAN;AAAA,KAAD,EAA0B,IAA1B,CAAV;AACH;;AAED,SAAOP,UAAP;AACH,CAzBD,E;;;;;;;;;;;ACAAF,MAAM,CAACC,MAAP,CAAc;AAACC,YAAU,EAAC,YAAU;AAAC,WAAOA,UAAP;AAAkB;AAAzC,CAAd;AAAO,IAAMA,UAAU,GAAG;AACtBgB,iBAAe,EAAE;AADK,CAAnB;;AAIPhB,UAAU,CAACW,GAAX;AAAiB,WAASA,GAAT,GAAe;AAAE,WAAOD,IAAI,CAACC,GAAL,KAAa,KAAKK,eAAzB;AAA2C;;AAA7E,SAA0BL,GAA1B;AAAA;;AAEAX,UAAU,CAACkB,IAAX;AAAkB,WAASA,IAAT,GAAgB;AAAE,WAAO,IAAIR,IAAJ,CAAS,KAAKC,GAAL,EAAT,CAAP;AAA8B;;AAAlE,SAA2BO,IAA3B;AAAA,I","file":"/packages/socialize_server-time.js","sourcesContent":["/* eslint-disable import/no-unresolved */\nimport { Meteor } from 'meteor/meteor';\n/* eslint-enable import/no-unresolved */\n\nimport construct from './server-time.js';\n\nconst ServerTime = construct({ Meteor });\n\n// At startup, wait a couple seconds so that we can get a more accurate latency estimation.\n// This is far from optimal but should work.\nMeteor.startup(() => Meteor.setTimeout(() => ServerTime.init(), 2000));\n\nexport { ServerTime };\n","import { ServerTime } from '../common/server-time';\n\nexport default ({ Meteor }) => {\n    ServerTime.init = () => {\n        ServerTime._diffStart = Date.now();\n\n        Meteor.call('socialize:getServerTime', (error, serverTimeStamp) => {\n            if (!error) {\n                const now = Date.now();\n                const latency = now - ServerTime._diffStart;\n\n                ServerTime._timeDifference = (serverTimeStamp + latency) - now;\n            } else {\n                throw (error);\n            }\n        });\n    };\n\n    if (!Meteor.isReactNative) {\n        \n    } else {\n        setTimeout(() => ServerTime.init(), 2000);\n    }\n\n    return ServerTime;\n};\n","export const ServerTime = {\n    _timeDifference: 0,\n};\n\nServerTime.now = function now() { return Date.now() + this._timeDifference; };\n\nServerTime.date = function date() { return new Date(this.now()); };\n"]}}]