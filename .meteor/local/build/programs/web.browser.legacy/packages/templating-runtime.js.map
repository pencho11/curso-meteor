{"version":3,"sources":["meteor://ðŸ’»app/packages/templating-runtime/templating.js","meteor://ðŸ’»app/packages/templating-runtime/dynamic.js"],"names":["Template","Blaze","RESERVED_TEMPLATE_NAMES","split","__checkName","name","includes","Error","__define__","renderFunc","_NOWARN_OLDSTYLE_HELPERS","body","view","contentRenderFuncs","map","func","apply","addContent","push","renderToDocument","render","document","__pendingReplacement","updateTimeout","_applyHmrChanges","templateName","setTimeout","i","length","views","__rootViews","slice","destroyed","_render","parentEl","_domrange","parentElement","_hmrParent","comment","_hmrAfter","first","firstNode","createComment","insertBefore","remove","newView","dataVar","renderWithData","curValue","removeChild","e","console","log","error","newestRoot","isCreated","isRendered","_migrateTemplate","newTemplate","migrate","oldTemplate","indexOf","__helpers","__eventMaps","_callbacks","created","rendered","splice","UI","__body__","__contentParts","contentViews","__instantiate","has","module","link","v","__dynamicWithDataContext","helpers","chooseTemplate","_getTemplate","instance","__dynamic","dataContextPresent","checkContext","Object","keys","forEach","k"],"mappings":"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","file":"/packages/templating-runtime.js","sourcesContent":["// Packages and apps add templates on to this object.\n\n/**\n * @summary The class for defining templates\n * @class\n * @instanceName Template.myTemplate\n */\nTemplate = Blaze.Template;\n\nvar RESERVED_TEMPLATE_NAMES = \"__proto__ name\".split(\" \");\n\n// Check for duplicate template names and illegal names that won't work.\nTemplate.__checkName = function (name) {\n  // Some names can't be used for Templates. These include:\n  //  - Properties Blaze sets on the Template object.\n  //  - Properties that some browsers don't let the code to set.\n  //    These are specified in RESERVED_TEMPLATE_NAMES.\n  if (name in Template || RESERVED_TEMPLATE_NAMES.includes(name)) {\n    if (Template[name] instanceof Template && name !== 'body')\n      throw new Error(\n        \"There are multiple templates named '\" +\n          name +\n          \"'. Each template needs a unique name.\"\n      );\n    throw new Error('This template name is reserved: ' + name);\n  }\n};\n\n// XXX COMPAT WITH 0.8.3\nTemplate.__define__ = function (name, renderFunc) {\n  Template.__checkName(name);\n  Template[name] = new Template(\"Template.\" + name, renderFunc);\n  // Exempt packages built pre-0.9.0 from warnings about using old\n  // helper syntax, because we can.  It's not very useful to get a\n  // warning about someone else's code (like a package on Atmosphere),\n  // and this should at least put a bit of a dent in number of warnings\n  // that come from packages that haven't been updated lately.\n  Template[name]._NOWARN_OLDSTYLE_HELPERS = true;\n};\n\n// Define a template `Template.body` that renders its\n// `contentRenderFuncs`.  `<body>` tags (of which there may be\n// multiple) will have their contents added to it.\n\n/**\n * @summary The [template object](#Template-Declarations) representing your `<body>`\n * tag.\n * @locus Client\n */\nTemplate.body = new Template('body', function () {\n  var view = this;\n  return Template.body.contentRenderFuncs.map(function (func) {\n    return func.apply(view);\n  });\n});\nTemplate.body.contentRenderFuncs = []; // array of Blaze.Views\nTemplate.body.view = null;\n\nTemplate.body.addContent = function (renderFunc) {\n  Template.body.contentRenderFuncs.push(renderFunc);\n};\n\n// This function does not use `this` and so it may be called\n// as `Meteor.startup(Template.body.renderIntoDocument)`.\nTemplate.body.renderToDocument = function () {\n  // Only do it once.\n  if (Template.body.view)\n    return;\n\n  var view = Blaze.render(Template.body, document.body);\n  Template.body.view = view;\n};\n\nTemplate.__pendingReplacement = []\n\nvar updateTimeout = null;\n\n// Simple HMR integration to re-render all of the root views\n// when a template is modified. This function can be overridden to provide\n// an alternative method of applying changes from HMR.\nTemplate._applyHmrChanges = function (templateName) {\n  if (updateTimeout) {\n    return;\n  }\n\n  // debounce so we only re-render once per rebuild\n  updateTimeout = setTimeout(function () {\n    updateTimeout = null;\n\n    for (var i = 0; i < Template.__pendingReplacement.length; i++) {\n      delete Template[Template.__pendingReplacement[i]];\n    }\n\n    Template.__pendingReplacement = [];\n\n    var views = Blaze.__rootViews.slice();\n    for (var i = 0; i < views.length; i++) {\n      var view = views[i];\n      if (view.destroyed) {\n        continue;\n      }\n\n      var renderFunc = view._render;\n      var parentEl;\n      if (view._domrange && view._domrange.parentElement) {\n        parentEl = view._domrange.parentElement;\n      } else if (view._hmrParent) {\n        parentEl = view._hmrParent;\n      }\n\n      var comment;\n      if (view._hmrAfter) {\n        comment = view._hmrAfter;\n      } else {\n        var first = view._domrange.firstNode();\n        comment = document.createComment('Blaze HMR PLaceholder');\n        parentEl.insertBefore(comment, first);\n      }\n\n      view._hmrAfter = null;\n      view._hmrParent = null;\n\n      if (view._domrange) {\n        Blaze.remove(view);\n      }\n\n      try {\n        if (view === Template.body.view) {\n          var newView = Blaze.render(Template.body, document.body, comment);\n          Template.body.view = newView;\n        } else if (view.dataVar) {\n          Blaze.renderWithData(renderFunc, view.dataVar.curValue, parentEl, comment);\n        } else {\n          Blaze.render(renderFunc, parentEl, comment);\n        }\n\n        parentEl.removeChild(comment);\n      } catch (e) {\n        console.log('[Blaze HMR] Error re-rending template:');\n        console.error(e);\n\n        // Record where the view should have been so we can still render it\n        // during the next update\n        var newestRoot = Blaze.__rootViews[Blaze.__rootViews.length - 1];\n        if (newestRoot && newestRoot.isCreated && !newestRoot.isRendered) {\n          newestRoot._hmrAfter = comment;\n          newestRoot._hmrParent = parentEl;\n        }\n      }\n    }\n  });\n};\n\nTemplate._migrateTemplate = function (templateName, newTemplate, migrate) {\n  var oldTemplate = Template[templateName];\n  var migrate = Template.__pendingReplacement.indexOf(templateName) > -1\n\n  if (oldTemplate && migrate) {\n    newTemplate.__helpers = oldTemplate.__helpers;\n    newTemplate.__eventMaps = oldTemplate.__eventMaps;\n    newTemplate._callbacks.created = oldTemplate._callbacks.created;\n    newTemplate._callbacks.rendered = oldTemplate._callbacks.rendered;\n    newTemplate._callbacks.destroyed = oldTemplate._callbacks.destroyed;\n    delete Template[templateName];\n    Template._applyHmrChanges(templateName);\n  }\n\n  if (migrate) {\n    Template.__pendingReplacement.splice(\n      Template.__pendingReplacement.indexOf(templateName),\n      1\n    )\n  }\n\n  Template.__checkName(templateName);\n  Template[templateName] = newTemplate;\n};\n\n// XXX COMPAT WITH 0.9.0\nUI.body = Template.body;\n\n// XXX COMPAT WITH 0.9.0\n// (<body> tags in packages built with 0.9.0)\nTemplate.__body__ = Template.body;\nTemplate.__body__.__contentParts = Template.body.contentViews;\nTemplate.__body__.__instantiate = Template.body.renderToDocument;\n","import has from 'lodash.has';\n\nvar Template = Blaze.Template;\n\n/**\n * @isTemplate true\n * @memberOf Template\n * @function dynamic\n * @summary Choose a template to include dynamically, by name.\n * @locus Templates\n * @param {String} template The name of the template to include.\n * @param {Object} [data] Optional. The data context in which to include the\n * template.\n */\n\nTemplate.__dynamicWithDataContext.helpers({\n  chooseTemplate: function (name) {\n    return Blaze._getTemplate(name, function () {\n      return Template.instance();\n    });\n  },\n});\n\nTemplate.__dynamic.helpers({\n  dataContextPresent: function () {\n    return has(this, 'data');\n  },\n  checkContext: function () {\n    if (!has(this, 'template')) {\n      throw new Error(\n        \"Must specify name in the 'template' argument \" +\n          'to {{> Template.dynamic}}.'\n      );\n    }\n\n    Object.keys(this).forEach(function (k) {\n      if (k !== 'template' && k !== 'data') {\n        throw new Error('Invalid argument to {{> Template.dynamic}}: ' + k);\n      }\n    });\n  },\n});\n"]}