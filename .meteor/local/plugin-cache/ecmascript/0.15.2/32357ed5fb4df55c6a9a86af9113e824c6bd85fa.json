{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\RUBEN\\Desktop\\meteor-vue\\packages\\blaze-tools\\tojs.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.windows.x86_64"},"sourceFileName":"packages/blaze-tools/tojs.js","filename":"C:\\Users\\RUBEN\\Desktop\\meteor-vue\\packages\\blaze-tools\\tojs.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"C:\\Users\\RUBEN\\Desktop\\meteor-vue","root":"C:\\Users\\RUBEN\\Desktop\\meteor-vue","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.14.0","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"C:\\Users\\RUBEN\\Desktop\\meteor-vue\\packages\\blaze-tools\\tojs.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/blaze-tools/tojs.js"}},"code":"module.export({\n  EmitCode: () => EmitCode,\n  toJSLiteral: () => toJSLiteral,\n  toObjectLiteralKey: () => toObjectLiteralKey,\n  ToJSVisitor: () => ToJSVisitor,\n  toJS: () => toJS\n});\nlet HTML;\nmodule.link(\"meteor/htmljs\", {\n  HTML(v) {\n    HTML = v;\n  }\n\n}, 0);\n\nfunction EmitCode(value) {\n  if (!(this instanceof EmitCode)) // called without `new`\n    return new EmitCode(value);\n  if (typeof value !== 'string') throw new Error('EmitCode must be constructed with a string');\n  this.value = value;\n}\n\nEmitCode.prototype.toJS = function (visitor) {\n  return this.value;\n}; // Turns any JSONable value into a JavaScript literal.\n\n\nfunction toJSLiteral(obj) {\n  // See <http://timelessrepo.com/json-isnt-a-javascript-subset> for `\\u2028\\u2029`.\n  // Also escape Unicode surrogates.\n  return JSON.stringify(obj).replace(/[\\u2028\\u2029\\ud800-\\udfff]/g, function (c) {\n    return \"\\\\u\" + ('000' + c.charCodeAt(0).toString(16)).slice(-4);\n  });\n}\n\nvar jsReservedWordSet = function (set) {\n  \"abstract else instanceof super boolean enum int switch break export interface synchronized byte extends let this case false long throw catch final native throws char finally new transient class float null true const for package try continue function private typeof debugger goto protected var default if public void delete implements return volatile do import short while double in static with\".split(' ').forEach(function (w) {\n    set[w] = 1;\n  });\n  return set;\n}({});\n\nfunction toObjectLiteralKey(k) {\n  if (/^[a-zA-Z$_][a-zA-Z$0-9_]*$/.test(k) && jsReservedWordSet[k] !== 1) return k;\n  return toJSLiteral(k);\n}\n\nvar hasToJS = function (x) {\n  return x.toJS && typeof x.toJS === 'function';\n};\n\nconst ToJSVisitor = HTML.Visitor.extend();\nToJSVisitor.def({\n  visitNull: function (nullOrUndefined) {\n    return 'null';\n  },\n  visitPrimitive: function (stringBooleanOrNumber) {\n    return toJSLiteral(stringBooleanOrNumber);\n  },\n  visitArray: function (array) {\n    var parts = [];\n\n    for (var i = 0; i < array.length; i++) parts.push(this.visit(array[i]));\n\n    return '[' + parts.join(', ') + ']';\n  },\n  visitTag: function (tag) {\n    return this.generateCall(tag.tagName, tag.attrs, tag.children);\n  },\n  visitComment: function (comment) {\n    return this.generateCall('HTML.Comment', null, [comment.value]);\n  },\n  visitCharRef: function (charRef) {\n    return this.generateCall('HTML.CharRef', {\n      html: charRef.html,\n      str: charRef.str\n    });\n  },\n  visitRaw: function (raw) {\n    return this.generateCall('HTML.Raw', null, [raw.value]);\n  },\n  visitObject: function (x) {\n    if (hasToJS(x)) {\n      return x.toJS(this);\n    }\n\n    throw new Error(\"Unexpected object in HTMLjs in toJS: \" + x);\n  },\n  generateCall: function (name, attrs, children) {\n    var tagSymbol;\n\n    if (name.indexOf('.') >= 0) {\n      tagSymbol = name;\n    } else if (HTML.isTagEnsured(name)) {\n      tagSymbol = 'HTML.' + HTML.getSymbolName(name);\n    } else {\n      tagSymbol = 'HTML.getTag(' + toJSLiteral(name) + ')';\n    }\n\n    var attrsArray = null;\n\n    if (attrs) {\n      attrsArray = [];\n      var needsHTMLAttrs = false;\n\n      if (HTML.isArray(attrs)) {\n        var attrsArray = [];\n\n        for (var i = 0; i < attrs.length; i++) {\n          var a = attrs[i];\n\n          if (hasToJS(a)) {\n            attrsArray.push(a.toJS(this));\n            needsHTMLAttrs = true;\n          } else {\n            var attrsObjStr = this.generateAttrsDictionary(attrs[i]);\n            if (attrsObjStr !== null) attrsArray.push(attrsObjStr);\n          }\n        }\n      } else if (hasToJS(attrs)) {\n        attrsArray.push(attrs.toJS(this));\n        needsHTMLAttrs = true;\n      } else {\n        attrsArray.push(this.generateAttrsDictionary(attrs));\n      }\n    }\n\n    var attrsStr = null;\n\n    if (attrsArray && attrsArray.length) {\n      if (attrsArray.length === 1 && !needsHTMLAttrs) {\n        attrsStr = attrsArray[0];\n      } else {\n        attrsStr = 'HTML.Attrs(' + attrsArray.join(', ') + ')';\n      }\n    }\n\n    var argStrs = [];\n    if (attrsStr !== null) argStrs.push(attrsStr);\n\n    if (children) {\n      for (var i = 0; i < children.length; i++) argStrs.push(this.visit(children[i]));\n    }\n\n    return tagSymbol + '(' + argStrs.join(', ') + ')';\n  },\n  generateAttrsDictionary: function (attrsDict) {\n    if (attrsDict.toJS && typeof attrsDict.toJS === 'function') {\n      // not an attrs dictionary, but something else!  Like a template tag.\n      return attrsDict.toJS(this);\n    }\n\n    var kvStrs = [];\n\n    for (var k in attrsDict) {\n      if (!HTML.isNully(attrsDict[k])) kvStrs.push(toObjectLiteralKey(k) + ': ' + this.visit(attrsDict[k]));\n    }\n\n    if (kvStrs.length) return '{' + kvStrs.join(', ') + '}';\n    return null;\n  }\n});\n\nfunction toJS(content) {\n  return new ToJSVisitor().visit(content);\n}","map":{"version":3,"sources":["packages/blaze-tools/tojs.js"],"names":["module","export","EmitCode","toJSLiteral","toObjectLiteralKey","ToJSVisitor","toJS","HTML","link","v","value","Error","prototype","visitor","obj","JSON","stringify","replace","c","charCodeAt","toString","slice","jsReservedWordSet","set","split","forEach","w","k","test","hasToJS","x","Visitor","extend","def","visitNull","nullOrUndefined","visitPrimitive","stringBooleanOrNumber","visitArray","array","parts","i","length","push","visit","join","visitTag","tag","generateCall","tagName","attrs","children","visitComment","comment","visitCharRef","charRef","html","str","visitRaw","raw","visitObject","name","tagSymbol","indexOf","isTagEnsured","getSymbolName","attrsArray","needsHTMLAttrs","isArray","a","attrsObjStr","generateAttrsDictionary","attrsStr","argStrs","attrsDict","kvStrs","isNully","content"],"mappings":"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","sourcesContent":["import { HTML } from 'meteor/htmljs';\n\n\nexport function EmitCode (value) {\n  if (! (this instanceof EmitCode))\n    // called without `new`\n    return new EmitCode(value);\n\n  if (typeof value !== 'string')\n    throw new Error('EmitCode must be constructed with a string');\n\n  this.value = value;\n}\n\nEmitCode.prototype.toJS = function (visitor) {\n  return this.value;\n};\n\n// Turns any JSONable value into a JavaScript literal.\nexport function toJSLiteral (obj) {\n  // See <http://timelessrepo.com/json-isnt-a-javascript-subset> for `\\u2028\\u2029`.\n  // Also escape Unicode surrogates.\n  return (JSON.stringify(obj)\n          .replace(/[\\u2028\\u2029\\ud800-\\udfff]/g, function (c) {\n            return '\\\\u' + ('000' + c.charCodeAt(0).toString(16)).slice(-4);\n          }));\n}\n\n\n\nvar jsReservedWordSet = (function (set) {\n  \"abstract else instanceof super boolean enum int switch break export interface synchronized byte extends let this case false long throw catch final native throws char finally new transient class float null true const for package try continue function private typeof debugger goto protected var default if public void delete implements return volatile do import short while double in static with\".split(' ').forEach(function (w) {\n    set[w] = 1;\n  });\n  return set;\n})({});\n\nexport function toObjectLiteralKey (k) {\n  if (/^[a-zA-Z$_][a-zA-Z$0-9_]*$/.test(k) && jsReservedWordSet[k] !== 1)\n    return k;\n  return toJSLiteral(k);\n}\n\nvar hasToJS = function (x) {\n  return x.toJS && (typeof (x.toJS) === 'function');\n};\n\nexport const ToJSVisitor = HTML.Visitor.extend();\nToJSVisitor.def({\n  visitNull: function (nullOrUndefined) {\n    return 'null';\n  },\n  visitPrimitive: function (stringBooleanOrNumber) {\n    return toJSLiteral(stringBooleanOrNumber);\n  },\n  visitArray: function (array) {\n    var parts = [];\n    for (var i = 0; i < array.length; i++)\n      parts.push(this.visit(array[i]));\n    return '[' + parts.join(', ') + ']';\n  },\n  visitTag: function (tag) {\n    return this.generateCall(tag.tagName, tag.attrs, tag.children);\n  },\n  visitComment: function (comment) {\n    return this.generateCall('HTML.Comment', null, [comment.value]);\n  },\n  visitCharRef: function (charRef) {\n    return this.generateCall('HTML.CharRef',\n                             {html: charRef.html, str: charRef.str});\n  },\n  visitRaw: function (raw) {\n    return this.generateCall('HTML.Raw', null, [raw.value]);\n  },\n  visitObject: function (x) {\n    if (hasToJS(x)) {\n      return x.toJS(this);\n    }\n\n    throw new Error(\"Unexpected object in HTMLjs in toJS: \" + x);\n  },\n  generateCall: function (name, attrs, children) {\n    var tagSymbol;\n    if (name.indexOf('.') >= 0) {\n      tagSymbol = name;\n    } else if (HTML.isTagEnsured(name)) {\n      tagSymbol = 'HTML.' + HTML.getSymbolName(name);\n    } else {\n      tagSymbol = 'HTML.getTag(' + toJSLiteral(name) + ')';\n    }\n\n    var attrsArray = null;\n    if (attrs) {\n      attrsArray = [];\n      var needsHTMLAttrs = false;\n      if (HTML.isArray(attrs)) {\n        var attrsArray = [];\n        for (var i = 0; i < attrs.length; i++) {\n          var a = attrs[i];\n          if (hasToJS(a)) {\n            attrsArray.push(a.toJS(this));\n            needsHTMLAttrs = true;\n          } else {\n            var attrsObjStr = this.generateAttrsDictionary(attrs[i]);\n            if (attrsObjStr !== null)\n              attrsArray.push(attrsObjStr);\n          }\n        }\n      } else if (hasToJS(attrs)) {\n        attrsArray.push(attrs.toJS(this));\n        needsHTMLAttrs = true;\n      } else {\n        attrsArray.push(this.generateAttrsDictionary(attrs));\n      }\n    }\n    var attrsStr = null;\n    if (attrsArray && attrsArray.length) {\n      if (attrsArray.length === 1 && ! needsHTMLAttrs) {\n        attrsStr = attrsArray[0];\n      } else {\n        attrsStr = 'HTML.Attrs(' + attrsArray.join(', ') + ')';\n      }\n    }\n\n    var argStrs = [];\n    if (attrsStr !== null)\n      argStrs.push(attrsStr);\n\n    if (children) {\n      for (var i = 0; i < children.length; i++)\n        argStrs.push(this.visit(children[i]));\n    }\n\n    return tagSymbol + '(' + argStrs.join(', ') + ')';\n  },\n  generateAttrsDictionary: function (attrsDict) {\n    if (attrsDict.toJS && (typeof (attrsDict.toJS) === 'function')) {\n      // not an attrs dictionary, but something else!  Like a template tag.\n      return attrsDict.toJS(this);\n    }\n\n    var kvStrs = [];\n    for (var k in attrsDict) {\n      if (! HTML.isNully(attrsDict[k]))\n        kvStrs.push(toObjectLiteralKey(k) + ': ' +\n                    this.visit(attrsDict[k]));\n    }\n    if (kvStrs.length)\n      return '{' + kvStrs.join(', ') + '}';\n    return null;\n  }\n});\n\nexport function toJS (content) {\n  return (new ToJSVisitor).visit(content);\n}\n"]},"sourceType":"module","hash":"32357ed5fb4df55c6a9a86af9113e824c6bd85fa"}
