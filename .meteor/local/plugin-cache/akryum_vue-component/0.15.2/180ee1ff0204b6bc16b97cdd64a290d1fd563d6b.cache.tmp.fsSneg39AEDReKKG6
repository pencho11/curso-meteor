{"code":"module.exportDefault = function(value) { __vue_script__ = value; }; (function(){var _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\nvar mapMutations;\nmodule.link(\"vuex\", {\n  mapMutations: function (v) {\n    mapMutations = v;\n  }\n}, 0);\nvar ModalRemove;\nmodule.link(\"../../components/utilities/Modals/ModalRemove\", {\n  \"default\": function (v) {\n    ModalRemove = v;\n  }\n}, 1);\nmodule.exportDefault({\n  name: \"ListUsers\",\n  components: {\n    ModalRemove: ModalRemove\n  },\n  data: function () {\n    return {\n      headersFilter: {\n        name: '',\n        username: '',\n        email: ''\n      },\n      userTemp: {\n        preposition: 'al',\n        typeElement: 'usuario',\n        mainNameElement: '',\n        _id: null,\n        element: {}\n      }\n    };\n  },\n  computed: {\n    headers: function () {\n      var _this = this;\n\n      return [{\n        value: 'profile.name',\n        text: 'Nombre',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.name.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'username',\n        text: 'Usuario',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.username.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'emails[0].address',\n        text: 'Correo',\n        sortable: true,\n        filter: function (value) {\n          return value != null && typeof value === 'string' && value.toString().toLocaleLowerCase().indexOf(_this.headersFilter.email.toLocaleLowerCase()) !== -1;\n        }\n      }, {\n        value: 'action',\n        text: 'Opciones',\n        sortable: false\n      }];\n    }\n  },\n  methods: _objectSpread({}, mapMutations('temporal', ['setElement']), {\n    // updateMainView() {\n    //     const currentRoute = this.$router.currentRoute.name.split('.').pop();\n    //     this.activeMainView = (currentRoute === 'users');\n    // },\n    openEditUser: function (user) {\n      this.setElement(user);\n      this.$router.push({\n        name: 'home.users.edit'\n      });\n    },\n    openRemoveModal: function (user) {\n      this.userTemp.element = user;\n      this.userTemp._id = user._id;\n      this.userTemp.mainNameElement = user.profile.name;\n      this.$refs.refModalRemove.dialog = true;\n    },\n    deleteUser: function (idUser) {\n      var _this2 = this;\n\n      this.$loader.activate('Eliminando usuario. . .');\n      Meteor.call('user.delete', {\n        idUser: idUser\n      }, function (error, response) {\n        _this2.$loader.desactivate();\n\n        if (error) {\n          _this2.$alert.showAlertSimple('error', error.reason);\n        } else {\n          _this2.$alert.showAlertSimple('succes', response.message);\n        }\n      });\n    }\n  }),\n  meteor: {\n    $subscribe: {\n      'user.list': []\n    },\n    users: function () {\n      return Meteor.users.find({\n        _id: {\n          $ne: Meteor.userId()\n        }\n      }).fetch();\n    }\n  }\n});\n})();","map":{"version":3,"sources":["imports/ui/views/Users/ListUsers.vue"],"names":["_objectSpread","module","link","default","v","mapMutations","ModalRemove","exportDefault","name","components","data","headersFilter","username","email","userTemp","preposition","typeElement","mainNameElement","_id","element","computed","headers","value","text","sortable","filter","toString","toLocaleLowerCase","indexOf","methods","openEditUser","user","setElement","$router","push","openRemoveModal","profile","$refs","refModalRemove","dialog","deleteUser","idUser","$loader","activate","Meteor","call","error","response","desactivate","$alert","showAlertSimple","reason","message","meteor","$subscribe","users","find","$ne","userId","fetch"],"mappings":"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","sourcesContent":["<template> \r\n    <v-container>\r\n        <v-row justify=\"center\">\r\n            <v-col xs=\"12\" sm=\"12\" md=\"10\" lg=\"8\" xl=\"5\"> \r\n                \r\n                    <div class=\"d-flex flex-row-reverse mb-5\">\r\n                        <v-tooltip bottom>\r\n                            <template v-slot:activator=\"{on}\">\r\n                                <v-btn v-can:create.hide=\"'users'\" color=\"success\" v-on=\"on\" fab dark :to=\"{name: 'home.users.create'}\">\r\n                                    <v-icon>add</v-icon>\r\n                                </v-btn>\r\n                            </template>\r\n                            <span>Agregar usuario</span>\r\n                        </v-tooltip>\r\n                    </div>\r\n                    <v-data-table :headers=\"headers\" :items=\"users\" @dblclick:row=\"(event,{item})=>openEditUser(item)\" sort-by=\"name\" class=\"elevation-1\">\r\n                        <template v-slot:item.action=\"{item}\">\r\n                            <v-tooltip bottom>\r\n                                <template  v-slot:activator=\"{on}\">\r\n                                    <v-icon v-can:edit.hide=\"'users'\" color=\"info\" v-on=\"on\" small class=\"mr-2\" @click=\"openEditUser(item)\">\r\n                                        edit\r\n                                    </v-icon>\r\n                                </template>\r\n                                <span>Editar</span>\r\n                            </v-tooltip>\r\n                            <v-tooltip bottom>\r\n                                <template  v-slot:activator=\"{on}\">\r\n                                    <v-icon v-can:delete.hide=\"'users'\" color=\"error\" v-on=\"on\" small class=\"mr-2\" @click=\"openRemoveModal(item)\">\r\n                                        delete\r\n                                    </v-icon>\r\n                                </template>\r\n                                <span>Eliminar</span>\r\n                            </v-tooltip>\r\n                        </template>\r\n                        <template v-slot:body.append=\"{isMobile}\">\r\n                            <tr v-if=\"!isMobile\">\r\n                                <td>\r\n                                    <v-text-field v-model=\"headersFilter.name\" type=\"text\" label=\"Nombre\"></v-text-field>\r\n                                </td>\r\n                                <td>\r\n                                    <v-text-field v-model=\"headersFilter.username\" type=\"text\" label=\"Usuario\"></v-text-field>\r\n                                </td>\r\n                                <td>\r\n                                    <v-text-field v-model=\"headersFilter.email\" type=\"email\" label=\"Correo\"></v-text-field>\r\n                                </td>\r\n                            </tr>\r\n                        </template>\r\n                    </v-data-table>\r\n                    <modal-remove ref=\"refModalRemove\" v-bind:modalData=\"userTemp\" @id_element=\"deleteUser\"></modal-remove>\r\n            </v-col>\r\n        </v-row>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n    import { mapMutations } from 'vuex';\r\n    import ModalRemove  from \"../../components/utilities/Modals/ModalRemove\";\r\n    \r\n    export default {\r\n        name: \"ListUsers\",\r\n        components: {\r\n            ModalRemove\r\n        },\r\n        data() {\r\n            return {\r\n                headersFilter: {\r\n                    name: '',\r\n                    username: '',\r\n                    email: ''\r\n                },\r\n                userTemp: {\r\n                    preposition: 'al',\r\n                    typeElement: 'usuario',\r\n                    mainNameElement: '',\r\n                    _id: null,\r\n                    element: {}\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            headers() {\r\n                return [\r\n                    {\r\n                        value: 'profile.name', text: 'Nombre', sortable: true, filter: value => {\r\n                            return value!=null && typeof value==='string' &&\r\n                                    value.toString().toLocaleLowerCase()\r\n                                    .indexOf(this.headersFilter.name.toLocaleLowerCase())!== -1;\r\n                        }\r\n                    },\r\n                    {\r\n                        value: 'username', text: 'Usuario', sortable: true, filter: value => {\r\n                            return value!=null && typeof value==='string' &&\r\n                                    value.toString().toLocaleLowerCase()\r\n                                    .indexOf(this.headersFilter.username.toLocaleLowerCase())!== -1;\r\n                        }\r\n                    },\r\n                    {\r\n                        value: 'emails[0].address', text: 'Correo', sortable: true, filter: value => {\r\n                            return value!=null && typeof value==='string' &&\r\n                                    value.toString().toLocaleLowerCase()\r\n                                    .indexOf(this.headersFilter.email.toLocaleLowerCase())!== -1;\r\n                        }\r\n                    },\r\n                    {value: 'action', text: 'Opciones', sortable: false}\r\n                ]\r\n            }\r\n        },\r\n        methods: {\r\n            ...mapMutations('temporal', ['setElement']),\r\n            // updateMainView() {\r\n            //     const currentRoute = this.$router.currentRoute.name.split('.').pop();\r\n            //     this.activeMainView = (currentRoute === 'users');\r\n            // },\r\n            openEditUser(user) {\r\n                this.setElement(user);\r\n                this.$router.push({name: 'home.users.edit'});\r\n            },\r\n            openRemoveModal(user) {\r\n                this.userTemp.element = user;\r\n                this.userTemp._id = user._id ;\r\n                this.userTemp.mainNameElement = user.profile.name;\r\n                this.$refs.refModalRemove.dialog = true;\r\n            },\r\n            deleteUser(idUser) {\r\n                this.$loader.activate('Eliminando usuario. . .');\r\n                Meteor.call('user.delete', {idUser}, (error, response) => {\r\n                    this.$loader.desactivate();\r\n                    if (error) {\r\n                        this.$alert.showAlertSimple('error', error.reason);\r\n                    } else {\r\n                        this.$alert.showAlertSimple('succes', response.message);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        meteor: {\r\n            $subscribe: {\r\n                'user.list': []\r\n            },\r\n            users() {\r\n                return Meteor.users.find({ _id: { $ne: Meteor.userId() } }).fetch(); \r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"file":"imports/ui/views/Users/ListUsers.vue"},"styles":[{"css":"\n\n","map":{"version":3,"sources":[],"names":[],"mappings":"","file":"ListUsers.vue"}}],"template":"\n<v-container>\n    <v-row justify=\"center\">\n        <v-col xs=\"12\" sm=\"12\" md=\"10\" lg=\"8\" xl=\"5\"> \n            \n                <div class=\"d-flex flex-row-reverse mb-5\">\n                    <v-tooltip bottom>\n                        <template v-slot:activator=\"{on}\">\n                            <v-btn v-can:create.hide=\"'users'\" color=\"success\" v-on=\"on\" fab dark :to=\"{name: 'home.users.create'}\">\n                                <v-icon>add</v-icon>\n                            </v-btn>\n                        </template>\n                        <span>Agregar usuario</span>\n                    </v-tooltip>\n                </div>\n                <v-data-table :headers=\"headers\" :items=\"users\" @dblclick:row=\"(event,{item})=>openEditUser(item)\" sort-by=\"name\" class=\"elevation-1\">\n                    <template v-slot:item.action=\"{item}\">\n                        <v-tooltip bottom>\n                            <template  v-slot:activator=\"{on}\">\n                                <v-icon v-can:edit.hide=\"'users'\" color=\"info\" v-on=\"on\" small class=\"mr-2\" @click=\"openEditUser(item)\">\n                                    edit\n                                </v-icon>\n                            </template>\n                            <span>Editar</span>\n                        </v-tooltip>\n                        <v-tooltip bottom>\n                            <template  v-slot:activator=\"{on}\">\n                                <v-icon v-can:delete.hide=\"'users'\" color=\"error\" v-on=\"on\" small class=\"mr-2\" @click=\"openRemoveModal(item)\">\n                                    delete\n                                </v-icon>\n                            </template>\n                            <span>Eliminar</span>\n                        </v-tooltip>\n                    </template>\n                    <template v-slot:body.append=\"{isMobile}\">\n                        <tr v-if=\"!isMobile\">\n                            <td>\n                                <v-text-field v-model=\"headersFilter.name\" type=\"text\" label=\"Nombre\"></v-text-field>\n                            </td>\n                            <td>\n                                <v-text-field v-model=\"headersFilter.username\" type=\"text\" label=\"Usuario\"></v-text-field>\n                            </td>\n                            <td>\n                                <v-text-field v-model=\"headersFilter.email\" type=\"email\" label=\"Correo\"></v-text-field>\n                            </td>\n                        </tr>\n                    </template>\n                </v-data-table>\n                <modal-remove ref=\"refModalRemove\" v-bind:modalData=\"userTemp\" @id_element=\"deleteUser\"></modal-remove>\n        </v-col>\n    </v-row>\n</v-container>\n","hash":"data-v-73bc0839"}