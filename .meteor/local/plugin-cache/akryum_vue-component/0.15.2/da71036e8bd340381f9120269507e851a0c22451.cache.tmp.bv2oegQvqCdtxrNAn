{"code":"module.exportDefault = function(value) { __vue_script__ = value; }; (function(){var Message;\nmodule.link(\"../../../api/Messages/Message\", {\n  Message: function (v) {\n    Message = v;\n  }\n}, 0);\nmodule.exportDefault({\n  name: 'Chat',\n  data: function () {\n    return {\n      contactSelected: null,\n      message: {\n        idSender: null,\n        idReceiver: null,\n        date: null,\n        text: null\n      }\n    };\n  },\n  methods: {\n    sendMessage: function () {\n      this.message.idSender = Meteor.userId();\n      this.message.idReceiver = this.contactSelected._id;\n      this.message.date = new Date().toISOString();\n      console.log('message: ', this.message);\n    }\n  },\n  meteor: {\n    $subscribe: {\n      'user.list': [],\n      'messages.list': function () {\n        return [this.contactSelected ? this.contactSelected._id : null];\n      }\n    },\n    users: function () {\n      return Meteor.users.find({\n        _id: {\n          $ne: Meteor.userId()\n        }\n      }).fetch();\n    },\n    messages: function () {\n      return this.contactSelected ? Message.find().fetch() : [];\n    }\n  }\n});\n})();","map":{"version":3,"sources":["imports/ui/views/Chat/Chat.vue"],"names":["Message","module","link","v","exportDefault","name","data","contactSelected","message","idSender","idReceiver","date","text","methods","sendMessage","Meteor","userId","_id","Date","toISOString","console","log","meteor","$subscribe","users","find","$ne","fetch","messages"],"mappings":";;;;;;qBAiEA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,cAEA;AACA,WAAA;AACA,MAAA,eAAA,EAAA,IADA;AAEA,MAAA,OAAA,EAAA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,UAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA,IAHA;AAIA,QAAA,IAAA,EAAA;AAJA;AAFA,KAAA;AASA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,cACA;AACA,WAAA,OAAA,CAAA,QAAA,GAAA,MAAA,CAAA,MAAA,EAAA;AACA,WAAA,OAAA,CAAA,UAAA,GAAA,KAAA,eAAA,CAAA,GAAA;AACA,WAAA,OAAA,CAAA,IAAA,GAAA,IAAA,IAAA,GAAA,WAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,WAAA,EAAA,KAAA,OAAA;AACA;AANA,GAbA;AAqBA,EAAA,MAAA,EAAA;AACA,IAAA,UAAA,EAAA;AACA,mBAAA,EADA;AAEA,uBAAA,YAAA;AACA,eAAA,CAAA,KAAA,eAAA,GAAA,KAAA,eAAA,CAAA,GAAA,GAAA,IAAA,CAAA;AACA;AAJA,KADA;AAOA,IAAA,KAPA,cAOA;AACA,aAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AAAA,QAAA,GAAA,EAAA;AAAA,UAAA,GAAA,EAAA,MAAA,CAAA,MAAA;AAAA;AAAA,OAAA,EAAA,KAAA,EAAA;AACA,KATA;AAUA,IAAA,QAVA,cAUA;AACA,aAAA,KAAA,eAAA,GAAA,OAAA,CAAA,IAAA,GAAA,KAAA,EAAA,GAAA,EAAA;AACA;AAZA;AArBA","sourcesContent":["<template>\r\n    <v-container fluid>\r\n        <v-row>\r\n            <v-col cols=\"12\" xs=\"12\" sm=\"4\" md=\"3\" lg=\"2\" xl=\"2\">\r\n                <v-card class=\"mx-auto\" max-width=\"300\" tile>\r\n                    <v-list subheader>\r\n                        <v-subheader>CONTACTOS</v-subheader>\r\n                        <v-list-item-group v-model=\"contactSelected\" color=\"primary\">\r\n                            <v-divider></v-divider>\r\n                            <template v-for=\"contact in users\">\r\n                                <v-list-item :key=\"contact._id\" :value=\"contact\">\r\n                                    <v-list-item-icon>\r\n                                        <v-icon :color=\"contact.status.online?'green':'red'\">\r\n                                            mdi-checkbox-blank-circle\r\n                                        </v-icon>\r\n                                    </v-list-item-icon>\r\n                                    <v-list-item-content>\r\n                                        <v-list-item-title v-text=\"contact.profile.name\">\r\n                                        </v-list-item-title>\r\n                                    </v-list-item-content>\r\n                                </v-list-item>\r\n                            </template>\r\n                        </v-list-item-group>\r\n                    </v-list>\r\n                </v-card>\r\n            </v-col>\r\n            <v-col cols=\"12\" xs=\"12\" sm=\"8\" md=\"9\" lg=\"10\" xl=\"10\">\r\n                <v-card class=\"mx-auto\" v-if=\"contactSelected\" height=\"70vh\">\r\n                    <v-list-item>\r\n                        <v-list-item-avatar size=\"36px\">\r\n                            <img :src=\"contactSelected.profile.path || '/img/user.png'\" alt=\"Avatar\">\r\n                        </v-list-item-avatar>\r\n                        <v-list-item-title class=\"headline\">{{ contactSelected.profile.name }}</v-list-item-title>\r\n                    </v-list-item>\r\n                    <v-card-text style=\"height: 70%\" class=\"overflow-y-auto\">\r\n                        <v-row v-for=\"msg in messages\" :class=\"msg.idReceiver===contactSelected._id?'justify-end':'justify-start'\">\r\n                            <v-col cols=\"7\">\r\n                                <v-card raised shaped color=\"msg.idReceiver===contactSelected._id?'cyan lighten-5' : 'red lighten-5'\">\r\n                                    <v-card-text class=\"pb-1\">\r\n                                        Este es un ejemplo de mensaje del contacto\r\n                                    </v-card-text>\r\n                                </v-card>\r\n                            </v-col>\r\n                        </v-row>\r\n                        \r\n                    </v-card-text>\r\n                    <v-card-actions>\r\n                        <v-text-field v-model=\"message.text\" v-on:keyup.enter=\"sendMessage\" label=\"Introduce tu mensaje\">\r\n                        </v-text-field>\r\n                        <v-btn class=\"mx-2\" @click=\"sendMessage\" fab dark color=\"indigo\">\r\n                            <v-icon dark>send</v-icon>\r\n                        </v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n                <v-card v-else height=\"70vh\">\r\n                    <h1>Bienvenido al chat</h1>\r\n                </v-card>\r\n            </v-col>\r\n        </v-row>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n    import {Message} from '../../../api/Messages/Message';\r\n    \r\n    export default {\r\n        name: 'Chat',\r\n        data() {\r\n            return {\r\n                contactSelected: null,\r\n                message: {\r\n                    idSender: null,\r\n                    idReceiver: null,\r\n                    date: null,\r\n                    text: null\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            sendMessage() {\r\n                this.message.idSender = Meteor.userId();\r\n                this.message.idReceiver = this.contactSelected._id;\r\n                this.message.date = new Date().toISOString();\r\n                console.log('message: ', this.message);\r\n            }\r\n        },\r\n        meteor: {\r\n            $subscribe: {\r\n                'user.list': [],\r\n                'messages.list': function() {\r\n                    return[this.contactSelected ? this.contactSelected._id : null]\r\n                }\r\n            },\r\n            users() {\r\n                return Meteor.users.find({ _id: { $ne: Meteor.userId() } }).fetch(); \r\n            },\r\n            messages() {\r\n                return this.contactSelected ? Message.find().fetch() : [];\r\n            }\r\n        }\r\n    };\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"file":"imports/ui/views/Chat/Chat.vue"},"styles":[{"css":"\n\n","map":{"version":3,"sources":[],"names":[],"mappings":"","file":"Chat.vue"}}],"template":"\n<v-container fluid>\n    <v-row>\n        <v-col cols=\"12\" xs=\"12\" sm=\"4\" md=\"3\" lg=\"2\" xl=\"2\">\n            <v-card class=\"mx-auto\" max-width=\"300\" tile>\n                <v-list subheader>\n                    <v-subheader>CONTACTOS</v-subheader>\n                    <v-list-item-group v-model=\"contactSelected\" color=\"primary\">\n                        <v-divider></v-divider>\n                        <template v-for=\"contact in users\">\n                            <v-list-item :key=\"contact._id\" :value=\"contact\">\n                                <v-list-item-icon>\n                                    <v-icon :color=\"contact.status.online?'green':'red'\">\n                                        mdi-checkbox-blank-circle\n                                    </v-icon>\n                                </v-list-item-icon>\n                                <v-list-item-content>\n                                    <v-list-item-title v-text=\"contact.profile.name\">\n                                    </v-list-item-title>\n                                </v-list-item-content>\n                            </v-list-item>\n                        </template>\n                    </v-list-item-group>\n                </v-list>\n            </v-card>\n        </v-col>\n        <v-col cols=\"12\" xs=\"12\" sm=\"8\" md=\"9\" lg=\"10\" xl=\"10\">\n            <v-card class=\"mx-auto\" v-if=\"contactSelected\" height=\"70vh\">\n                <v-list-item>\n                    <v-list-item-avatar size=\"36px\">\n                        <img :src=\"contactSelected.profile.path || '/img/user.png'\" alt=\"Avatar\">\n                    </v-list-item-avatar>\n                    <v-list-item-title class=\"headline\">{{ contactSelected.profile.name }}</v-list-item-title>\n                </v-list-item>\n                <v-card-text style=\"height: 70%\" class=\"overflow-y-auto\">\n                    <v-row v-for=\"msg in messages\" :class=\"msg.idReceiver===contactSelected._id?'justify-end':'justify-start'\">\n                        <v-col cols=\"7\">\n                            <v-card raised shaped color=\"msg.idReceiver===contactSelected._id?'cyan lighten-5' : 'red lighten-5'\">\n                                <v-card-text class=\"pb-1\">\n                                    Este es un ejemplo de mensaje del contacto\n                                </v-card-text>\n                            </v-card>\n                        </v-col>\n                    </v-row>\n                    \n                </v-card-text>\n                <v-card-actions>\n                    <v-text-field v-model=\"message.text\" v-on:keyup.enter=\"sendMessage\" label=\"Introduce tu mensaje\">\n                    </v-text-field>\n                    <v-btn class=\"mx-2\" @click=\"sendMessage\" fab dark color=\"indigo\">\n                        <v-icon dark>send</v-icon>\n                    </v-btn>\n                </v-card-actions>\n            </v-card>\n            <v-card v-else height=\"70vh\">\n                <h1>Bienvenido al chat</h1>\n            </v-card>\n        </v-col>\n    </v-row>\n</v-container>\n","hash":"data-v-2dc1bbe5"}