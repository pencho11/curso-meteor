{"code":"module.exportDefault = function(value) { __vue_script__ = value; }; (function(){var draggable;\nmodule.link(\"vuedraggable\", {\n  \"default\": function (v) {\n    draggable = v;\n  }\n}, 0);\nmodule.exportDefault({\n  name: \"SaveProfile\",\n  components: {\n    draggable: draggable\n  },\n  data: function () {\n    return {\n      profile: {\n        _id: null,\n        name: null,\n        description: null,\n        permissions: []\n      },\n      dataView: {\n        title: '',\n        targetButton: ''\n      },\n      searchSelfPermission: '',\n      searchPermission: '',\n      selfPermission: [],\n      allPermission: []\n    };\n  },\n  created: function () {\n    if (this.$router.currentRoute.name.includes(\"create\")) {\n      this.dataView.title = \"Crear perfil\";\n      this.dataView.targetButton = \"Crear\";\n      this.listAllPermissions();\n    } else if (this.$router.currentRoute.name.includes(\"edit\")) {\n      this.dataView.title = \"Editar perfil\";\n      this.dataView.targetButton = \"Actualizar\";\n    }\n  },\n  methods: {\n    onChangeDragList: function (event, propData) {\n      if (event.hasOwnProperty('removed')) {\n        this[propData] = this[propData].filter(function (permissions) {\n          return permissions._id !== event.removed.element._id;\n        });\n      } else if (event.hasOwnProperty('added')) {\n        this[propData].splice(event.added.newIndex, 0, event.added.element);\n      }\n    },\n    saveProfile: function () {\n      console.log(\"perfil: \", this.perfil);\n    },\n    listAllPermissions: function () {\n      var _this = this;\n\n      Meteor.call('permissions.list', function (error, response) {\n        if (error) {\n          _this.$alert.showAlertSimple('error', error.reason);\n        } else {\n          _this.allPermission = response.data;\n        }\n      });\n    }\n  },\n  computed: {\n    filteredSelfPermissions: function () {\n      var _this2 = this;\n\n      return this.selfPermission.filter(function (permissions) {\n        return permissions._id.toLowerCase().includes(_this2.searchSelfPermission.toLowerCase());\n      });\n    },\n    filteredPermissions: function () {\n      var _this3 = this;\n\n      return this.allPermission.filter(function (permissions) {\n        return permissions.publicName.toLowerCase().includes(_this3.searchPermission.toLowerCase());\n      });\n    }\n  }\n});\n})();","map":{"version":3,"sources":["imports/ui/views/Profiles/SaveProfile.vue"],"names":["draggable","module","link","v","exportDefault","name","components","data","profile","_id","description","permissions","dataView","title","targetButton","searchSelfPermission","searchPermission","selfPermission","allPermission","created","$router","currentRoute","includes","listAllPermissions","methods","onChangeDragList","event","propData","hasOwnProperty","filter","removed","element","splice","added","newIndex","saveProfile","console","log","perfil","Meteor","call","error","response","$alert","showAlertSimple","reason","computed","filteredSelfPermissions","toLowerCase","filteredPermissions","publicName"],"mappings":";;;;;;qBA6EA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,cAKA;AACA,WAAA;AACA,MAAA,OAAA,EAAA;AACA,QAAA,GAAA,EAAA,IADA;AAEA,QAAA,IAAA,EAAA,IAFA;AAGA,QAAA,WAAA,EAAA,IAHA;AAIA,QAAA,WAAA,EAAA;AAJA,OADA;AAOA,MAAA,QAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,YAAA,EAAA;AAFA,OAPA;AAWA,MAAA,oBAAA,EAAA,EAXA;AAYA,MAAA,gBAAA,EAAA,EAZA;AAaA,MAAA,cAAA,EAAA,EAbA;AAcA,MAAA,aAAA,EAAA;AAdA,KAAA;AAgBA,GAtBA;AAuBA,EAAA,OAvBA,cAuBA;AACA,QAAA,KAAA,OAAA,CAAA,YAAA,CAAA,IAAA,CAAA,QAAA,CAAA,QAAA,CAAA,EAAA;AACA,WAAA,QAAA,CAAA,KAAA,GAAA,cAAA;AACA,WAAA,QAAA,CAAA,YAAA,GAAA,OAAA;AACA,WAAA,kBAAA;AACA,KAJA,MAIA,IAAA,KAAA,OAAA,CAAA,YAAA,CAAA,IAAA,CAAA,QAAA,CAAA,MAAA,CAAA,EAAA;AACA,WAAA,QAAA,CAAA,KAAA,GAAA,eAAA;AACA,WAAA,QAAA,CAAA,YAAA,GAAA,YAAA;AACA;AACA,GAhCA;AAiCA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,YACA,KADA,EACA,QADA,EACA;AACA,UAAA,KAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,aAAA,QAAA,IAAA,KAAA,QAAA,EAAA,MAAA,CAAA,UAAA,WAAA;AAAA,iBAAA,WAAA,CAAA,GAAA,KAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA;AAAA,SAAA,CAAA;AACA,OAFA,MAEA,IAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA,EAAA;AACA,aAAA,QAAA,EAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,QAAA,EAAA,CAAA,EAAA,KAAA,CAAA,KAAA,CAAA,OAAA;AACA;AACA,KAPA;AAQA,IAAA,WARA,cAQA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,UAAA,EAAA,KAAA,MAAA;AACA,KAVA;AAWA,IAAA,kBAXA,cAWA;AAAA;;AACA,MAAA,MAAA,CAAA,IAAA,CAAA,kBAAA,EAAA,UAAA,KAAA,EAAA,QAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,eAAA,CAAA,OAAA,EAAA,KAAA,CAAA,MAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,aAAA,GAAA,QAAA,CAAA,IAAA;AACA;AACA,OANA;AAOA;AAnBA,GAjCA;AAsDA,EAAA,QAAA,EAAA;AACA,IAAA,uBADA,cACA;AAAA;;AACA,aAAA,KAAA,cAAA,CAAA,MAAA,CAAA,UAAA,WAAA,EAAA;AACA,eAAA,WAAA,CAAA,GAAA,CAAA,WAAA,GAAA,QAAA,CAAA,MAAA,CAAA,oBAAA,CAAA,WAAA,EAAA,CAAA;AACA,OAFA,CAAA;AAGA,KALA;AAMA,IAAA,mBANA,cAMA;AAAA;;AACA,aAAA,KAAA,aAAA,CAAA,MAAA,CAAA,UAAA,WAAA,EAAA;AACA,eAAA,WAAA,CAAA,UAAA,CAAA,WAAA,GAAA,QAAA,CAAA,MAAA,CAAA,gBAAA,CAAA,WAAA,EAAA,CAAA;AACA,OAFA,CAAA;AAGA;AAVA;AAtDA","sourcesContent":["<template>\r\n    <v-container>\r\n        <v-row>\r\n            <v-col>\r\n                <div class=\"headline\">{{dataView.title}}</div>\r\n            </v-col>\r\n            <v-col cols=\"2\">\r\n                <v-btn block type=\"submit\" form=\"saveProfile\" color=\"primary\" v-text=\"dataView.targetButton\">\r\n                </v-btn>\r\n            </v-col>\r\n        </v-row>\r\n        <v-row>\r\n            <v-col>\r\n                <v-form @submit.prevent=\"saveProfile\" id=\"saveProfile\" autocomplete=\"off\">\r\n                    <v-row>\r\n                        <v-col md=\"6\">\r\n                            <v-text-field v-model=\"profile.name\" id=\"inputName\" name=\"name\" label=\"Nombre del perfil\">\r\n                            </v-text-field>\r\n                        </v-col>\r\n                        <v-col md=\"6\">\r\n                            <v-text-field v-model=\"profile.description\" id=\"inputDescription\" name=\"name\" \r\n                                        label=\"Descripcion del perfil\">\r\n                            </v-text-field>\r\n                        </v-col>\r\n                    </v-row>\r\n                </v-form>\r\n            </v-col>\r\n        </v-row>\r\n        <v-row>\r\n            <v-col>\r\n                <v-card>\r\n                    <v-card-title>Permisos de este perfil</v-card-title>\r\n                <v-card-text>\r\n                    <v-text-field v-model=\"searchSelfPermission\" placeholder=\"Buscar. . .\"\r\n                                    id=\"inputSearchSelfPermission\" name=\"profileName\">\r\n                    </v-text-field>\r\n                </v-card-text>\r\n                <v-sheet id=\"scrolling-techniques-2\" class=\"overflow-y-auto\" max-height=\"500\">\r\n                    <v-list style=\"height: 400px\">\r\n                        <v-list-item-group>\r\n                            <draggable :list=\"filteredSelfPermissions\" @change=\"(ev)=>onChangeDragList(ev,'selfPermission')\" group=\"permissions\">\r\n                                <v-list-item v-for=\"permissions in filteredSelfPermissions\"\r\n                                            v-text=\"permissions.publicName\" :key=\"permissions._id\">\r\n                                </v-list-item>\r\n                            </draggable>\r\n                        </v-list-item-group>\r\n                    </v-list>\r\n                </v-sheet>\r\n                </v-card>\r\n            </v-col>\r\n            <v-col>\r\n                <v-card>\r\n                    <v-card-title>Todos los permisos</v-card-title>\r\n                    <v-card-text>\r\n                        <v-text-field v-model=\"searchPermission\" placeholder=\"Buscar. . .\"\r\n                                        id=\"inputSearchPermission\" name=\"profileName2\">\r\n                        </v-text-field>\r\n                    </v-card-text>\r\n                    <v-sheet id=\"scrolling-techniques-3\" class=\"overflow-y-auto\" max-height=\"500\">\r\n                        <v-list style=\"height: 400px\">\r\n                            <v-list-item-group>\r\n                                <draggable :list=\"filteredPermissions\" @change=\"(ev)=>onChangeDragList(ev,'allPermission')\" group=\"permissions\">\r\n                                    <v-list-item v-for=\"permissions in filteredPermissions\"\r\n                                                v-text=\"permissions.publicName\" :key=\"permissions._id\">\r\n                                    </v-list-item>\r\n                                </draggable>\r\n                            </v-list-item-group>\r\n                        </v-list>\r\n                    </v-sheet>\r\n                </v-card>\r\n            </v-col>\r\n        </v-row>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n    import draggable from 'vuedraggable';\r\n    export default {\r\n        name: \"SaveProfile\",\r\n        components: {\r\n            draggable\r\n        },\r\n        data() {\r\n            return {\r\n                profile: {\r\n                _id: null,\r\n                name: null,\r\n                description: null,\r\n                permissions: []\r\n                },\r\n                dataView: {\r\n                    title: '',\r\n                    targetButton: ''\r\n                },\r\n                searchSelfPermission: '',\r\n                searchPermission: '',\r\n                selfPermission: [],\r\n                allPermission: []\r\n            }\r\n        },\r\n        created() {\r\n            if(this.$router.currentRoute.name.includes(\"create\")) {\r\n                this.dataView.title = \"Crear perfil\";\r\n                this.dataView.targetButton = \"Crear\";\r\n                this.listAllPermissions();\r\n            } else if(this.$router.currentRoute.name.includes(\"edit\")){\r\n                this.dataView.title = \"Editar perfil\";\r\n                this.dataView.targetButton = \"Actualizar\";\r\n            }\r\n        },\r\n        methods: {\r\n            onChangeDragList(event, propData) {\r\n                if (event.hasOwnProperty('removed')) {\r\n                    this[propData] = this[propData].filter(permissions => permissions._id !== event.removed.element._id);\r\n                } else if (event.hasOwnProperty('added')) {\r\n                    this[propData].splice(event.added.newIndex, 0, event.added.element);\r\n                }\r\n            },\r\n            saveProfile() {\r\n                console.log(\"perfil: \", this.perfil);\r\n            },\r\n            listAllPermissions() {\r\n                Meteor.call('permissions.list', (error, response) => {\r\n                    if (error) {\r\n                        this.$alert.showAlertSimple('error', error.reason);\r\n                    } else {\r\n                        this.allPermission = response.data;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        computed: {\r\n            filteredSelfPermissions() {\r\n                return this.selfPermission.filter(permissions => {\r\n                    return permissions._id.toLowerCase().includes(this.searchSelfPermission.toLowerCase());\r\n                })\r\n            },\r\n            filteredPermissions() {\r\n                return this.allPermission.filter(permissions => {\r\n                    return permissions.publicName.toLowerCase().includes(this.searchPermission.toLowerCase());\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"file":"imports/ui/views/Profiles/SaveProfile.vue"},"styles":[{"css":"\n\n","map":{"version":3,"sources":[],"names":[],"mappings":"","file":"SaveProfile.vue"}}],"template":"\n<v-container>\n    <v-row>\n        <v-col>\n            <div class=\"headline\">{{dataView.title}}</div>\n        </v-col>\n        <v-col cols=\"2\">\n            <v-btn block type=\"submit\" form=\"saveProfile\" color=\"primary\" v-text=\"dataView.targetButton\">\n            </v-btn>\n        </v-col>\n    </v-row>\n    <v-row>\n        <v-col>\n            <v-form @submit.prevent=\"saveProfile\" id=\"saveProfile\" autocomplete=\"off\">\n                <v-row>\n                    <v-col md=\"6\">\n                        <v-text-field v-model=\"profile.name\" id=\"inputName\" name=\"name\" label=\"Nombre del perfil\">\n                        </v-text-field>\n                    </v-col>\n                    <v-col md=\"6\">\n                        <v-text-field v-model=\"profile.description\" id=\"inputDescription\" name=\"name\" \n                                    label=\"Descripcion del perfil\">\n                        </v-text-field>\n                    </v-col>\n                </v-row>\n            </v-form>\n        </v-col>\n    </v-row>\n    <v-row>\n        <v-col>\n            <v-card>\n                <v-card-title>Permisos de este perfil</v-card-title>\n            <v-card-text>\n                <v-text-field v-model=\"searchSelfPermission\" placeholder=\"Buscar. . .\"\n                                id=\"inputSearchSelfPermission\" name=\"profileName\">\n                </v-text-field>\n            </v-card-text>\n            <v-sheet id=\"scrolling-techniques-2\" class=\"overflow-y-auto\" max-height=\"500\">\n                <v-list style=\"height: 400px\">\n                    <v-list-item-group>\n                        <draggable :list=\"filteredSelfPermissions\" @change=\"(ev)=>onChangeDragList(ev,'selfPermission')\" group=\"permissions\">\n                            <v-list-item v-for=\"permissions in filteredSelfPermissions\"\n                                        v-text=\"permissions.publicName\" :key=\"permissions._id\">\n                            </v-list-item>\n                        </draggable>\n                    </v-list-item-group>\n                </v-list>\n            </v-sheet>\n            </v-card>\n        </v-col>\n        <v-col>\n            <v-card>\n                <v-card-title>Todos los permisos</v-card-title>\n                <v-card-text>\n                    <v-text-field v-model=\"searchPermission\" placeholder=\"Buscar. . .\"\n                                    id=\"inputSearchPermission\" name=\"profileName2\">\n                    </v-text-field>\n                </v-card-text>\n                <v-sheet id=\"scrolling-techniques-3\" class=\"overflow-y-auto\" max-height=\"500\">\n                    <v-list style=\"height: 400px\">\n                        <v-list-item-group>\n                            <draggable :list=\"filteredPermissions\" @change=\"(ev)=>onChangeDragList(ev,'allPermission')\" group=\"permissions\">\n                                <v-list-item v-for=\"permissions in filteredPermissions\"\n                                            v-text=\"permissions.publicName\" :key=\"permissions._id\">\n                                </v-list-item>\n                            </draggable>\n                        </v-list-item-group>\n                    </v-list>\n                </v-sheet>\n            </v-card>\n        </v-col>\n    </v-row>\n</v-container>\n","hash":"data-v-31227a01"}